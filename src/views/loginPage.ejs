<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>醫快拍App</title>
    <link rel="stylesheet" href="/css/loginpage.css">
    <link rel="stylesheet" href="/css/modal.css">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
</head>
<body>
    <div class="login-container">
        <div class="login-header">
            <img src="/static/images/logo.png" alt="App Logo" class="logo">
            <h1>口腔癌 AI 檢測系統</h1>
        </div>

        <div class="login-form-professor <%= login_role === 'professor' ? '' : 'hidden' %>" id="professor">
            <form class="login-form" action="/api/auth/sign-in" id="professor-tab">
                <label for="name">使用者姓名：</label>
                <input type="text" id="name" name="name" placeholder="姓名" value="<%= typeof name !== 'undefined' ? name : '' %>" />

                <label for="email">帳號 (Email)：</label>
                <input type="text" id="email" name="email" placeholder="帳號" value="<%= typeof email !== 'undefined' ? email : '' %>" />
                
                <label for="password">密碼：</label>
                <input type="password" id="password" name="password" autocomplete="current-password" required />
                
                <button type="submit" class="btn-primary">登入</button>
                
                <div class="qr-login">
                    <button type="button" class="btn-secondary">QR Code 掃描登入</button>
                </div>
            </form>

            <a href="/api/auth/changepwd" class="link-forgot">忘記密碼？</a>
            <a href="/api/auth/register" class="link-forgot">註冊</a>
            

            <!--
            <a href="/api/auth/changepwd" class="link-forgot">忘記密碼?</a>
            <a href="/api/auth/homepage" class="link-forgot"> 返回首頁 </a> -->

            <a href="/api/auth/homepage" class="link-forgot"> 返回首頁 </a>
        </div>
        
        <div class="login-form-patient <%= login_role === 'patient' ? '' : 'hidden' %>" id="patient">
            <form class="login-form" id="patient-tab">
                <p>請使用 QR Code 掃描器進行登入</p>
  
                <!--
                <div id="scanner-container">
                    <video id="camera" autoplay playsinline></video>
                    <canvas id="snapshot" style="display:none;"></canvas>
                </div>

                <button type="button" id="reset-scan" class="btn-secondary">重新掃描</button>
                -->

                <canvas id="snapshot" style="display:none;"></canvas>

                <img id="qrImage" alt="Login QR Code">

                <div id="scan-result" style="margin-top:1rem; color:green;"></div>

                <a href="/api/auth/homepage" class="link-forgot"> 返回首頁 </a>
            </form>
        </div>

        <div class="footer">
            <a href="#" style="text-decoration:none; font-weight:800; color:#3aa3d1">Mi-tech</a> Copyright © 2019
        </div>
    </div>

    <div id="modal-container"></div>
    <div id="modal-container-loading"></div>
    <div id="modal-container-2"></div>
    
    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/js/jsQR.js"></script>
    <script type="module" src="/js/login.js"></script>
</body>
</html>